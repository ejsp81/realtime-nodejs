ul.listEvents
script.
  var socket = io();
  getSoccerGame();        
  getEvents();
  function insertDetail(event){        
    if (event.isLocalEvent){
      $('.listEvents').append(`
      <li style="width:50%">
        <div class="msj macro">
        <div class="avatar"><img class="img-circle" src="${event.player.team.shield}" /></div>
          <div class="text text-l">
            <p>${event.type_event}</p>
            <p>${event.player.name}</p>
            <p><small>Minuto: ${event.time}</small></p>
          </div>
        </div>
      </li>`)                   
    }else if(!event.isLocalEvent){
      if (event.type_event=='FIRST_TIME'||event.type_event=='END_GAME'){
        $('.listEvents').append(`
        <li style="width:50%;margin-left:20%">
          <div class="msj-rta macro text text-center">
            <h3>${event.type_event}</h3>
          </div>
        </li>`)                   
      } else{    
        $('.listEvents').append(`
        <li style="width:50%;margin-left:40%">
          <div class="msj-rta macro">
            <div class="text text-r">
              <p>${event.type_event}</p>
              <p>${event.player.name}</p>
              <p><small>Minuto: ${event.time}</small></p>
            </div>
          <div class="avatar" style="padding:0px 0px 0px 0px !important"><img class="img-circle" src="${event.player.team.shield}" /></div>
        </li>`)
      }
    } 
     
  }
  var playerL,playerV,isLocal,shieldL,shieldV;
  //Seleccionar Jugador
  $("input[name='radio']").change(async function(){
    $('#selPlayer').children('option:not(:first)').remove();
    if ($(this).attr("id")==='teamEventL') {
        playerL.forEach(addPlayer);
        isLocal=true;
    } else {
      playerV.forEach(addPlayer);
      isLocal=false;
    }
  });

  function resetEvents(){
    $('.listEvents').empty();
  }
  //llena combos Jugadores
  function addPlayer(player){
      $("#selPlayer").append(`
        <option value=${player._id}>${player.name}</option>`)
  }
  //Selecciona partidos en juego
  $("select#selSoccerGame").change(async function(){
    resetEvents();
    let details = await fetch('/detail_matchs/getByTournamentResult/'+$("#selSoccerGame").val());
    if (details.ok) {
      let json =  details.json();
      json.then(async (details)=>{   
        details.forEach(detail => {
          insertDetail(detail);
        });
        
      })
    } else {
      alert("HTTP-Error: " + details.status);
    } 
    //obtiene partidos en juego
    let soccerGame = await fetch('/tournament_results/'+$("#selSoccerGame").val());
    if (soccerGame.ok) {
      let json =  soccerGame.json();
      json.then(async (team)=>{
        $("#imgLocal").attr("src",team.local_team.shield);
        $("#nameLocal").html(team.local_team.name);
        $("#goalLocal").html(team.local_goals);
        $("#lblTl").text(team.local_team.name);
        $("#teamEventL").val(team.local_team._id);
        shieldL=team.local_team.shield;              
        
        $("#imgVisitor").attr("src",team.visitor_team.shield);
        $("#nameVisitor").html(team.visitor_team.name);
        $("#goalVisitor").html(team.visitor_goals);
        $("#lblTv").html(team.visitor_team.name);
        $("#teamEventV").val(team.visitor_team._id);
        shieldV=team.visitor_team.shield;

        $("#currentTime").html(team.current_time);   
        
        let playersL = await fetch('/players/getByTeam/'+team.local_team._id);              
        if (playersL.ok) {
          let json =  playersL.json();
          json.then(players=>{                                  
            playerL=players;
          })
        } else {
          alert("HTTP-Error: " + playersL.status);
        }  
        let playersV = await fetch('/players/getByTeam/'+team.visitor_team._id);              
        if (playersV.ok) {
          let json =  playersV.json();
          json.then(players=>{                                   
            playerV=players;
          })
        } else {
          alert("HTTP-Error: " + playersV.status);
        } 
      })
    } else {
      alert("HTTP-Error: " + soccerGame.status);
    } 
  });
  $(function () {
    $( "#btnTeam" ).click(function(e) {
      e.preventDefault();   
      var player= $('select[name="selPlayer"] option:selected').text();
      var shield=isLocal?shieldL:shieldV,data; 
      data={
        tournament_result: $("#selSoccerGame").val(), 
        type_event: $("#selEvent").val(), 
        player: $("#selPlayer").val(), 
        time: $("#currentTime").html(), 
        isLocalEvent:isLocal};
      createEvents(data)
      if ($("#selEvent").val()==='GOAL') {
        if (isLocal) {
          data={
            local_goals:parseInt($("#goalLocal").html())+1
          }
        } else {
          data={
            visitor_goals:parseInt($("#goalVisitor").html())+1
          }
        }
        updateTr(data,$("#selSoccerGame").val());
      }
    });  
  }); 
  function updateTr(data,tr){
    fetch('/tournament_results/'+tr+'/update', {
      method: 'POST',
      headers: {
          'Content-Type': 'application/json'
      },
      body: JSON.stringify(data)
    });
  }  
  function createEvents(data){
    fetch('/detail_matchs/create', {
      method: 'POST',
      headers: {
          'Content-Type': 'application/json'
      },
      body: JSON.stringify(data)
    });
  }  
  //Escucha cambios en 
  socket.on('changeDetailMatch', function(event){
    insertDetail(event);
  });
  socket.on('first_time', function(event){
    console.log(event);
    data={
        tournament_result: $("#selSoccerGame").val(), 
        type_event: 'FIRST_TIME', 
        player: null, 
        time: 45, 
        isLocalEvent:null};
    createEvents(data)
  });
  //Escucha cambios en ournamentResult
  socket.on('updateTournamentResult', function(tr){
    if ($("#selSoccerGame").val()==tr._id) {
      $("#currentTime").html(tr.current_time);
      $("#goalLocal").html(tr.local_goals)
      $("#goalVisitor").html(tr.visitor_goals)
    }
  });
  socket.on('insertTournamentResult', function(tr){
    console.log(tr)
    addSoccerGame(tr)
  });
  //llena combo Partidos
  function addSoccerGame(soccerGame){
    $("#selSoccerGame").append(`
      <option value=${soccerGame._id}>${soccerGame.local_team.name} vs ${soccerGame.visitor_team.name}</option>
    `)
  } 
  //obtiene Partidos en juego  
  function getSoccerGame(){
    $.get('/tournament_results/getIsPlaying', (data) => {
      data.forEach(addSoccerGame);                
    });
  }
  //llena combos Eventos
  function addEvent(events){
    $("#selEvent").append(`
      <option value=${events.name}>${events.name}</option>`)
  }  
  //obtiene Eventos 
  function getEvents(){            
    $.get('/events/get', (data) => {
      data.forEach(addEvent);
    });
  }